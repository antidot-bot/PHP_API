<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Antidot PHP API: Detailled integration example with PHP template engine</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-antidot-long-200x41.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Antidot PHP API
   &#160;<span id="projectnumber">version 0.6.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Detailled integration example with PHP template engine </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#ie_prerequisite">Prerequisites</a></li>
<li class="level1"><a href="#ie_example">Set up example step by step</a><ul><li class="level2"><a href="#ie_example_init">Initialization</a></li>
<li class="level2"><a href="#ie_example_final">Generate HTML page</a></li>
<li class="level2"><a href="#ie_example_full">Full example</a></li>
</ul>
</li>
<li class="level1"><a href="#ie_templates">PHP template examples</a></li>
<li class="level1"><a href="#ie_conclusion">Example conclusion</a></li>
<li class="level1"><a href="#ie_further">Go further</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="ie_prerequisite"></a>
Prerequisites</h1>
<p>In order to test this example, some components are required. Details are provided in following link: <a class="el" href="template_prerequisites.html">Prerequisites for integration examples with PHP template engine</a></p>
<h1><a class="anchor" id="ie_example"></a>
Set up example step by step</h1>
<p>Most of the steps to set up this example are detailed in <a class="el" href="afs_search_coder.html">AFS search query coder/decoder API</a>, <a class="el" href="afs_search_query.html">AFS search query API</a> and <a class="el" href="afs_search_reply.html">AFS search reply API</a>.</p>
<p>Here focus is given on missing steps in order to make the example fully functional.</p>
<h2><a class="anchor" id="ie_example_init"></a>
Initialization</h2>
<p>It should be the first step. Antidot PHP API should be loaded from PHP example script. It is not necessary to load each PHP script as one main script does it for you: </p>
<div class="fragment"><div class="line">require_once <span class="stringliteral">&quot;PHP_API/afs_lib.php&quot;</span>;</div>
</div><!-- fragment --><p> Then Twig should also be loaded and initialized. Depending on your installation choices, following example may be modified to reflect your installation paths: </p>
<div class="fragment"><div class="line"><span class="comment">// You shoud addapt following paths</span></div>
<div class="line">require_once <span class="stringliteral">&quot;/var/www/php-example/Twig-1.15.0/lib/Twig/Autoloader.php&quot;</span>;</div>
<div class="line">Twig_Autoloader::register();</div>
<div class="line">$loader = <span class="keyword">new</span> Twig_Loader_Filesystem(<span class="stringliteral">&#39;/var/www/php-example/templates&#39;</span>);</div>
<div class="line">$twig = <span class="keyword">new</span> Twig_Environment($loader, array(<span class="stringliteral">&#39;debug&#39;</span> =&gt; <span class="keyword">true</span>));</div>
<div class="line">$twig-&gt;addExtension(<span class="keyword">new</span> Twig_Extension_Debug());</div>
</div><!-- fragment --><h2><a class="anchor" id="ie_example_final"></a>
Generate HTML page</h2>
<p>This is the last step.<br/>
 Main Twig template is loaded with appropriate parameters and then rendered: </p>
<div class="fragment"><div class="line">$template = $twig-&gt;loadTemplate(<span class="stringliteral">&#39;meta_template.html&#39;</span>);</div>
<div class="line">echo $template-&gt;render($helper-&gt;format());</div>
</div><!-- fragment --><p>This code brevity is obtained thanks to special array formatting of reply helpers (see <em><a class="el" href="classAfsHelperFormat.html#a896b8a062d099cb54681b259342e2399" title="Outputs from response helper and sub-sequent child helpers are array of key/value pairs...">AfsHelperFormat::ARRAYS</a></em>).</p>
<h2><a class="anchor" id="ie_example_full"></a>
Full example</h2>
<p>The full example is also available here: <a class="el" href="full_example_8php-example.html">full_example.php</a></p>
<h1><a class="anchor" id="ie_templates"></a>
PHP template examples</h1>
<p>Various templates are detailled in following link: <a class="el" href="templates_in_details.html">PHP templates in details</a></p>
<h1><a class="anchor" id="ie_conclusion"></a>
Example conclusion</h1>
<p>Provided example is composed of about 28 lines of PHP code. About third of these lines are related to facet configuration. So in few PHP code lines and some PHP templates, you can get a fully functional Web interface for your Antidot search service.</p>
<h1><a class="anchor" id="ie_further"></a>
Go further</h1>
<p>Modify this example and templates then test on your own service! </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Feb 19 2014 17:30:44 for Antidot PHP API by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
