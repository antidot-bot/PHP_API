<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Antidot PHP API: raw_example.php</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-antidot-long-200x41.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Antidot PHP API
   &#160;<span id="projectnumber">version 0.10.5</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">raw_example.php</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line">&lt;?php</div>
<div class="line">require_once <span class="stringliteral">&quot;PHP_API/afs_lib.php&quot;</span>;</div>
<div class="line"></div>
<div class="line"><a name="a0"></a><a class="code" href="full__lightweight__example_8php.html#ae549977dd05a017aa81372f6994bf955">$search</a> = <span class="keyword">new</span> <a name="_a1"></a><a class="code" href="classAfsSearch.html">AfsSearch</a>(<span class="stringliteral">&#39;eval.partners.antidot.net&#39;</span>, 48000);</div>
<div class="line"></div>
<div class="line">$query = <a class="code" href="full__lightweight__example_8php.html#ae549977dd05a017aa81372f6994bf955">$search</a>-&gt;build_query_from_url_parameters();</div>
<div class="line">$query = $query-&gt;set_lang(<span class="stringliteral">&#39;fr&#39;</span>);  <span class="comment">// language is set manually in order to get spellcheck results</span></div>
<div class="line">$query = $query-&gt;set_multi_selection_facets(<span class="stringliteral">&#39;classification&#39;</span>);</div>
<div class="line">$query = $query-&gt;set_mono_selection_facets(<span class="stringliteral">&#39;afs:lang&#39;</span>, <span class="stringliteral">&#39;has_variants&#39;</span>, <span class="stringliteral">&#39;has_image&#39;</span>);</div>
<div class="line">$query = $query-&gt;set_facet_order(<span class="stringliteral">&#39;price_eur&#39;</span>, <span class="stringliteral">&#39;marketing&#39;</span>, <span class="stringliteral">&#39;classification&#39;</span>, <span class="stringliteral">&#39;has_variants&#39;</span>, <span class="stringliteral">&#39;has_image&#39;</span>);</div>
<div class="line"></div>
<div class="line"><a name="a2"></a><a class="code" href="full__example_8php.html#ab03a8518b780b4b3b7f0d88cd1bb1186">$helper</a> = <a class="code" href="full__lightweight__example_8php.html#ae549977dd05a017aa81372f6994bf955">$search</a>-&gt;execute($query);</div>
<div class="line">$generated_url = <a class="code" href="full__lightweight__example_8php.html#ae549977dd05a017aa81372f6994bf955">$search</a>-&gt;get_generated_url();</div>
<div class="line"></div>
<div class="line">$clustering_is_active = $query-&gt;has_cluster();</div>
<div class="line">$nsmap = array(<span class="stringliteral">&#39;ns&#39;</span> =&gt; <span class="stringliteral">&#39;http://ref.antidot.net/store/afs#&#39;</span>);</div>
<div class="line"></div>
<div class="line">?&gt;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">&lt;html&gt;</div>
<div class="line">  &lt;head&gt;</div>
<div class="line">    &lt;title&gt;Antidot PHP API - Raw example&lt;/title&gt;</div>
<div class="line">    &lt;meta name=<span class="stringliteral">&quot;viewport&quot;</span> content=<span class="stringliteral">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</div>
<div class="line">    &lt;meta charset=<span class="stringliteral">&quot;UTF-8&quot;</span>&gt;</div>
<div class="line">    &lt;link rel=<span class="stringliteral">&quot;stylesheet&quot;</span> href=<span class="stringliteral">&quot;//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css&quot;</span>&gt;</div>
<div class="line">    &lt;link rel=<span class="stringliteral">&quot;stylesheet&quot;</span> href=<span class="stringliteral">&quot;//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-theme.min.css&quot;</span>&gt;</div>
<div class="line">    &lt;!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries --&gt;</div>
<div class="line">    &lt;!--[<span class="keywordflow">if</span> lt IE 9]&gt;</div>
<div class="line">      &lt;script src=<span class="stringliteral">&quot;../../assets/js/html5shiv.js&quot;</span>&gt;&lt;/script&gt;</div>
<div class="line">      &lt;script src=<span class="stringliteral">&quot;../../assets/js/respond.min.js&quot;</span>&gt;&lt;/script&gt;</div>
<div class="line">    &lt;![endif]--&gt;</div>
<div class="line">  &lt;/head&gt;</div>
<div class="line">  &lt;body&gt;</div>
<div class="line">    &lt;div&gt;</div>
<div class="line">    &lt;a href=<span class="stringliteral">&quot;&lt;?php echo $generated_url; ?&gt;&quot;</span> target=<span class="stringliteral">&quot;_blank&quot;</span>&gt;&lt;?php echo $generated_url; ?&gt;&lt;/a&gt;</div>
<div class="line">    &lt;/div&gt;</div>
<div class="line">    &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;page-header&quot;</span>&gt;</div>
<div class="line">      &lt;h1&gt;Raw example &lt;small&gt;based on the Antidot PHP API&lt;/small&gt;&lt;/h1&gt;</div>
<div class="line">    &lt;/div&gt;</div>
<div class="line">    &lt;!-- ####################### Search box ########################### --&gt;</div>
<div class="line">    &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;row&quot;</span>&gt;</div>
<div class="line">      &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;col-md-5&quot;</span>&gt;&lt;/div&gt;</div>
<div class="line">      &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;input-group col-md-2&quot;</span>&gt;</div>
<div class="line">        &lt;form method=<span class="stringliteral">&quot;get&quot;</span> action=<span class="stringliteral">&quot;&quot;</span> role=<span class="stringliteral">&quot;form&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;input-group&quot;</span>&gt;</div>
<div class="line">          &lt;span <span class="keyword">class</span>=<span class="stringliteral">&quot;input-group-addon&quot;</span>&gt;Search&lt;/span&gt;</div>
<div class="line">          &lt;input type=<span class="stringliteral">&quot;search&quot;</span> name=<span class="stringliteral">&quot;query&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;form-control&quot;</span> placeholder=<span class="stringliteral">&quot;Keywords&quot;</span> /&gt;</div>
<div class="line">          &lt;span <span class="keyword">class</span>=<span class="stringliteral">&quot;input-group-btn&quot;</span>&gt;</div>
<div class="line">            &lt;button <span class="keyword">class</span>=<span class="stringliteral">&quot;btn btn-primary&quot;</span> type=<span class="stringliteral">&quot;submit&quot;</span>&gt;&lt;span <span class="keyword">class</span>=<span class="stringliteral">&quot;glyphicon glyphicon-search&quot;</span>&gt;&lt;/span&gt;&lt;/button&gt;</div>
<div class="line">          &lt;/span&gt;</div>
<div class="line">        &lt;/form&gt;</div>
<div class="line">      &lt;/div&gt;</div>
<div class="line">    &lt;/div&gt;</div>
<div class="line"></div>
<div class="line">    &lt;!-- ####################### Current <a name="a3"></a><a class="code" href="afs__filter_8php.html#af79b692968a5d4fc4175fa1c373b0b59">filter</a> parameters ########################### --&gt;</div>
<div class="line">&lt;?php</div>
<div class="line">$params = $query-&gt;get_parameters(<span class="keyword">false</span>);</div>
<div class="line"><span class="keywordflow">if</span> (array_key_exists(<span class="stringliteral">&#39;filter&#39;</span>, $params) &amp;&amp; is_array($params[<span class="stringliteral">&#39;filter&#39;</span>])) {</div>
<div class="line">    echo <span class="stringliteral">&#39;</span></div>
<div class="line"><span class="stringliteral">    &lt;div class=&quot;row&quot;&gt;</span></div>
<div class="line"><span class="stringliteral">      &lt;div class=&quot;col-md-8&quot;&gt;&#39;</span>;</div>
<div class="line">    <span class="keywordflow">foreach</span> ($params[<span class="stringliteral">&#39;filter&#39;</span>] as $filter =&gt; $values) {</div>
<div class="line">        echo <span class="stringliteral">&#39;</span></div>
<div class="line"><span class="stringliteral">        &lt;ul&gt;Filter: &lt;strong&gt;&#39;</span> . $filter . <span class="stringliteral">&#39;&lt;/strong&gt;&#39;</span>;</div>
<div class="line">        <span class="keywordflow">foreach</span> ($values as $value) {</div>
<div class="line">            echo <span class="stringliteral">&#39;</span></div>
<div class="line"><span class="stringliteral">          &lt;li&gt;Value: &#39;</span> . $value . <span class="stringliteral">&#39;&lt;/li&gt;&#39;</span>;</div>
<div class="line">        }</div>
<div class="line">        echo <span class="stringliteral">&#39;</span></div>
<div class="line"><span class="stringliteral">        &lt;/ul&gt;&#39;</span>;</div>
<div class="line">    }</div>
<div class="line">    echo <span class="stringliteral">&#39;</span></div>
<div class="line"><span class="stringliteral">      &lt;/div&gt;</span></div>
<div class="line"><span class="stringliteral">    &lt;/div&gt;&#39;</span>;</div>
<div class="line">} ?&gt;</div>
<div class="line"></div>
<div class="line">    &lt;!-- ####################### Promote ########################### --&gt;</div>
<div class="line">&lt;?php</div>
<div class="line"><span class="keywordflow">if</span> (<a class="code" href="full__example_8php.html#ab03a8518b780b4b3b7f0d88cd1bb1186">$helper</a>-&gt;has_promote()) {</div>
<div class="line">    echo <span class="stringliteral">&#39;</span></div>
<div class="line"><span class="stringliteral">    &lt;div class=&quot;row&quot;&gt;</span></div>
<div class="line"><span class="stringliteral">      &lt;div class=&quot;col-md-3&quot;&gt;&lt;/div&gt;&#39;</span>;</div>
<div class="line">    <span class="keywordflow">foreach</span> (<a class="code" href="full__example_8php.html#ab03a8518b780b4b3b7f0d88cd1bb1186">$helper</a>-&gt;get_promotes() as $promote) {</div>
<div class="line">        echo <span class="stringliteral">&#39;</span></div>
<div class="line"><span class="stringliteral">          &lt;div class=&quot;col-md-2&quot;&gt;</span></div>
<div class="line"><span class="stringliteral">            &lt;h4&gt;&lt;span class=&quot;label label-danger&quot;&gt;&#39;</span> . $promote-&gt;get_title() . <span class="stringliteral">&#39;&lt;/span&gt;&lt;/h4&gt;</span></div>
<div class="line"><span class="stringliteral">            &lt;p&gt;&#39;</span> . $promote-&gt;get_abstract() . <span class="stringliteral">&#39;&lt;/p&gt;</span></div>
<div class="line"><span class="stringliteral">            &lt;ul&gt;Some custom data:</span></div>
<div class="line"><span class="stringliteral">              &lt;li&gt;tag: &#39;</span> . $promote-&gt;get_custom_data(<span class="stringliteral">&#39;tag&#39;</span>) . <span class="stringliteral">&#39;&lt;/li&gt;</span></div>
<div class="line"><span class="stringliteral">              &lt;li&gt;identifier: &#39;</span> . $promote-&gt;get_custom_data(<span class="stringliteral">&#39;id&#39;</span>) . <span class="stringliteral">&#39;&lt;/li&gt;</span></div>
<div class="line"><span class="stringliteral">            &lt;/ul&gt;</span></div>
<div class="line"><span class="stringliteral">            &lt;ul&gt;Or loop on custom data:&#39;</span>;</div>
<div class="line">        <span class="keywordflow">foreach</span> ($promote-&gt;get_custom_data() as $key =&gt; $value) {</div>
<div class="line">            echo <span class="stringliteral">&#39;</span></div>
<div class="line"><span class="stringliteral">              &lt;li&gt;&lt;strong&gt;&#39;</span> . $key . <span class="stringliteral">&#39;&lt;/strong&gt;: &#39;</span> . $value . <span class="stringliteral">&#39;&lt;/li&gt;&#39;</span>;</div>
<div class="line">        }</div>
<div class="line">        echo <span class="stringliteral">&#39;</span></div>
<div class="line"><span class="stringliteral">            &lt;/ul&gt;</span></div>
<div class="line"><span class="stringliteral">          &lt;/div&gt;&#39;</span>;</div>
<div class="line">    }</div>
<div class="line">    echo <span class="stringliteral">&#39;</span></div>
<div class="line"><span class="stringliteral">      &lt;/div&gt;</span></div>
<div class="line"><span class="stringliteral">    &lt;/div&gt;&#39;</span>;</div>
<div class="line">} ?&gt;</div>
<div class="line"></div>
<div class="line">&lt;?php</div>
<div class="line"><span class="comment">// checks whether there is at least one replyset</span></div>
<div class="line"><span class="keywordflow">if</span> (<a class="code" href="full__example_8php.html#ab03a8518b780b4b3b7f0d88cd1bb1186">$helper</a>-&gt;has_replyset()) {</div>
<div class="line">    $replyset = <a class="code" href="full__example_8php.html#ab03a8518b780b4b3b7f0d88cd1bb1186">$helper</a>-&gt;get_replyset(); <span class="comment">// Retrieves only first replyset</span></div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ($replyset-&gt;has_facet()) {</div>
<div class="line">    <span class="comment">/* if (in_array(&#39;facets&#39;, $replyset)) */</span></div>
<div class="line">?&gt;</div>
<div class="line">    &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;row&quot;</span>&gt;</div>
<div class="line">    &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;col-md-3&quot;</span>&gt;</div>
<div class="line">      &lt;h2&gt;Filters&lt;/h2&gt;</div>
<div class="line">    &lt;!-- ####################### Filters ########################### --&gt;</div>
<div class="line">&lt;?php</div>
<div class="line"><span class="keywordflow">foreach</span> ($replyset-&gt;get_facets() as $facet) {</div>
<div class="line"><span class="comment">/* foreach ($replyset-&gt;facets-&gt;facet as $facet) */</span></div>
<div class="line">?&gt;</div>
<div class="line">            &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;panel panel-default&quot;</span>&gt;</div>
<div class="line">            &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;panel-heading&quot;</span>&gt;&lt;?php echo $facet-&gt;get_label() ?&gt;&lt;/div&gt; &lt;!-- $facet-&gt;labels[0]-&gt;label --&gt;</div>
<div class="line">              &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;panel-body&quot;</span>&gt;</div>
<div class="line">                &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;list-group&quot;</span>&gt;</div>
<div class="line">                 &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;list-group&quot;</span>&gt;</div>
<div class="line">&lt;?php</div>
<div class="line"><span class="keywordflow">foreach</span> ($facet-&gt;get_elements() as $value) {</div>
<div class="line"><span class="comment">/* $item = null;</span></div>
<div class="line"><span class="comment"> * if ($facet-&gt;{&#39;afs:t&#39;} == &#39;FacetTree&#39;) {</span></div>
<div class="line"><span class="comment"> *   $item = &#39;node&#39;;</span></div>
<div class="line"><span class="comment"> * } elif ($facet-&gt;{&#39;afs:t&#39;} == &#39;FacetInterval&#39;) {</span></div>
<div class="line"><span class="comment"> *   $item = &#39;interval;</span></div>
<div class="line"><span class="comment"> * } else {</span></div>
<div class="line"><span class="comment"> *   throw new Exception(&#39;Unknown facet layout: &#39; . $facet-&gt;{&#39;afs:t&#39;});</span></div>
<div class="line"><span class="comment"> * }</span></div>
<div class="line"><span class="comment"> * foreach ($facet-&gt;$item as $value) */</span></div>
<div class="line">?&gt;</div>
<div class="line">            &lt;a <span class="keyword">class</span>=<span class="stringliteral">&quot;list-group-item &lt;?php echo ($value-&gt;active ? &#39;active&#39; : &#39;&#39;) ?&gt;&quot;</span> href=<span class="stringliteral">&quot;&lt;?php echo $value-&gt;link ?&gt;&quot;</span>&gt;&lt;?php echo $value-&gt;label ?&gt;&lt;span <span class="keyword">class</span>=<span class="stringliteral">&quot;badge&quot;</span>&gt;&lt;?php echo $value-&gt;count ?&gt;&lt;/span&gt;&lt;/a&gt;</div>
<div class="line">                    &lt;!-- $active = $query-&gt;has_filter($facet-&gt;id, $value-&gt;key);</div>
<div class="line">                      ...</div>
<div class="line">                    --&gt;</div>
<div class="line">&lt;?php } ?&gt;</div>
<div class="line">                 &lt;/div&gt;</div>
<div class="line">                &lt;/div&gt;</div>
<div class="line">              &lt;/div&gt;</div>
<div class="line">            &lt;/div&gt;</div>
<div class="line">&lt;?php } ?&gt;</div>
<div class="line">    &lt;/div&gt;</div>
<div class="line">&lt;?php } ?&gt;</div>
<div class="line"></div>
<div class="line">&lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;col-md-9&quot;</span>&gt;</div>
<div class="line">  &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;row page-header&quot;</span>&gt;</div>
<div class="line">    &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;col-md-1&quot;</span>&gt;&lt;/div&gt;</div>
<div class="line">    &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;col-md-2&quot;</span>&gt;</div>
<div class="line">    &lt;h2&gt;Results &lt;span <span class="keyword">class</span>=<span class="stringliteral">&quot;label label-success&quot;</span>&gt;&lt;?php echo $replyset-&gt;get_meta()-&gt;get_total_replies() ?&gt;&lt;/span&gt;&lt;/h2&gt;</div>
<div class="line">      &lt;h4&gt;&lt;span <span class="keyword">class</span>=<span class="stringliteral">&quot;label label-info&quot;</span>&gt;Duration &lt;?php echo $replyset-&gt;get_meta()-&gt;get_duration() ?&gt; ms&lt;/span&gt;&lt;/h4&gt;</div>
<div class="line">    &lt;/div&gt;</div>
<div class="line">    &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;col-md-1&quot;</span>&gt;&lt;/div&gt;</div>
<div class="line">    &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;col-md-2&quot;</span>&gt;</div>
<div class="line">    &lt;!-- ####################### Relevance ########################### --&gt;</div>
<div class="line">&lt;?php</div>
<div class="line">    <span class="keywordflow">if</span> ($query-&gt;has_sort(<a name="a4"></a><a class="code" href="classAfsSortBuiltins.html#af14a8f405cbe365869a34d4320357f17">AfsSortBuiltins::RELEVANCE</a>)) {</div>
<div class="line">        <span class="keywordflow">if</span> ($query-&gt;get_sort_order(<a class="code" href="classAfsSortBuiltins.html#af14a8f405cbe365869a34d4320357f17">AfsSortBuiltins::RELEVANCE</a>) == <a name="a5"></a><a class="code" href="classAfsSortOrder.html#a32bea9cb6a1769ec537f6acdfe4618a8">AfsSortOrder::ASC</a>) {</div>
<div class="line">            $relevance_icon = <span class="stringliteral">&#39;glyphicon-arrow-up&#39;</span>;</div>
<div class="line">            $relevance_query = $query-&gt;add_sort(<a class="code" href="classAfsSortBuiltins.html#af14a8f405cbe365869a34d4320357f17">AfsSortBuiltins::RELEVANCE</a>, <a name="a6"></a><a class="code" href="classAfsSortOrder.html#a34abf23cff3df464425b7cedf58e2939">AfsSortOrder::DESC</a>);</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            $relevance_icon = <span class="stringliteral">&#39;glyphicon-arrow-down&#39;</span>;</div>
<div class="line">            $relevance_query = $query-&gt;add_sort(<a class="code" href="classAfsSortBuiltins.html#af14a8f405cbe365869a34d4320357f17">AfsSortBuiltins::RELEVANCE</a>, <a class="code" href="classAfsSortOrder.html#a32bea9cb6a1769ec537f6acdfe4618a8">AfsSortOrder::ASC</a>);</div>
<div class="line">        }</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        $relevance_query = $query-&gt;add_sort(<a class="code" href="classAfsSortBuiltins.html#af14a8f405cbe365869a34d4320357f17">AfsSortBuiltins::RELEVANCE</a>, <a class="code" href="classAfsSortOrder.html#a32bea9cb6a1769ec537f6acdfe4618a8">AfsSortOrder::ASC</a>);</div>
<div class="line">        $relevance_icon = <span class="stringliteral">&#39;glyphicon-arrow-down&#39;</span>;</div>
<div class="line">    }</div>
<div class="line">    $relevance_link = <a class="code" href="full__lightweight__example_8php.html#ae549977dd05a017aa81372f6994bf955">$search</a>-&gt;get_helpers_configuration()-&gt;get_query_coder()-&gt;generate_link($relevance_query);</div>
<div class="line">?&gt;</div>
<div class="line">    &lt;a href=<span class="stringliteral">&quot;&lt;?php echo $relevance_link ?&gt;&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;btn btn-default btn-lg active&quot;</span> role=<span class="stringliteral">&quot;button&quot;</span>&gt;&lt;span <span class="keyword">class</span>=<span class="stringliteral">&quot;glyphicon &lt;?php echo $relevance_icon; ?&gt;&quot;</span>&gt;&lt;/span&gt; Relevance&lt;/a&gt;</div>
<div class="line">    &lt;/div&gt;</div>
<div class="line">    &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;col-md-2&quot;</span>&gt;</div>
<div class="line">&lt;?php</div>
<div class="line">$query_coder = <a class="code" href="full__lightweight__example_8php.html#ae549977dd05a017aa81372f6994bf955">$search</a>-&gt;get_helpers_configuration()-&gt;get_query_coder();</div>
<div class="line"><span class="keywordflow">if</span> ($clustering_is_active) {</div>
<div class="line">    $cluster_query = $query-&gt;unset_cluster();</div>
<div class="line">    $cluster_link = $query_coder-&gt;generate_link($query-&gt;unset_cluster());</div>
<div class="line">    $cluster_label = <span class="stringliteral">&#39;Remove clusters&#39;</span>;</div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">    $cluster_link = $query_coder-&gt;generate_link($query-&gt;set_cluster(<span class="stringliteral">&#39;marketing&#39;</span>, 1)-&gt;set_overspill());</div>
<div class="line">    $cluster_label = <span class="stringliteral">&#39;Create cluster on &quot;marketing&quot; filter&#39;</span>;</div>
<div class="line">} ?&gt;</div>
<div class="line">      &lt;a href=<span class="stringliteral">&quot;&lt;?php echo $cluster_link ?&gt;&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;btn btn-default btn-lg active&quot;</span> role=<span class="stringliteral">&quot;button&quot;</span>&gt;&lt;?php echo $cluster_label ?&gt;&lt;/a&gt;</div>
<div class="line">    &lt;/div&gt;</div>
<div class="line">  &lt;/div&gt;</div>
<div class="line"></div>
<div class="line">    &lt;!-- ####################### Clusters ########################### --&gt;</div>
<div class="line">&lt;?php</div>
<div class="line"><span class="keywordflow">if</span> ($clustering_is_active) {</div>
<div class="line">    <span class="keywordflow">foreach</span> ($replyset-&gt;get_clusters() as $cluster) {</div>
<div class="line">        echo <span class="stringliteral">&#39;</span></div>
<div class="line"><span class="stringliteral">  &lt;div class=&quot;row&quot;&gt;</span></div>
<div class="line"><span class="stringliteral">    &lt;div class=&quot;col-md-1&quot;&gt;&lt;/div&gt;</span></div>
<div class="line"><span class="stringliteral">    &lt;div class=&quot;col-md-5&quot;&gt;</span></div>
<div class="line"><span class="stringliteral">      &lt;h3&gt;</span></div>
<div class="line"><span class="stringliteral">        &lt;span class=&quot;label label-success&quot;&gt;</span></div>
<div class="line"><span class="stringliteral">          &lt;a href=&quot;&#39;</span> . $query_coder-&gt;generate_link($cluster-&gt;get_query()) . <span class="stringliteral">&#39;&quot;&gt;&#39;</span> . $cluster-&gt;get_label() . <span class="stringliteral">&#39;&lt;a&gt;</span></div>
<div class="line"><span class="stringliteral">        &lt;/span&gt;</span></div>
<div class="line"><span class="stringliteral">      &lt;/h3&gt;</span></div>
<div class="line"><span class="stringliteral">    &lt;/div&gt;</span></div>
<div class="line"><span class="stringliteral">  &lt;/div&gt;</span></div>
<div class="line"><span class="stringliteral">  &lt;ul class=&quot;list-unstyled&quot;&gt;&#39;</span>;</div>
<div class="line">        <span class="keywordflow">foreach</span> ($cluster-&gt;get_replies() as <a name="a7"></a><a class="code" href="full__lightweight__example_8php.html#a46ad7c5fff64ab9b49b9cfcaff650baa">$reply</a>) {</div>
<div class="line">            echo <span class="stringliteral">&#39;</span></div>
<div class="line"><span class="stringliteral">          &lt;li&gt;</span></div>
<div class="line"><span class="stringliteral">              &lt;h3&gt;&#39;</span> . <a class="code" href="full__lightweight__example_8php.html#a46ad7c5fff64ab9b49b9cfcaff650baa">$reply</a>-&gt;get_title() . <span class="stringliteral">&#39;&lt;/h3&gt;</span></div>
<div class="line"><span class="stringliteral">              &lt;p&gt;&lt;a href=&quot;&#39;</span> . <a class="code" href="full__lightweight__example_8php.html#a46ad7c5fff64ab9b49b9cfcaff650baa">$reply</a>-&gt;get_uri() . <span class="stringliteral">&#39;&quot;&gt;&#39;</span> . <a class="code" href="full__lightweight__example_8php.html#a46ad7c5fff64ab9b49b9cfcaff650baa">$reply</a>-&gt;get_uri() . <span class="stringliteral">&#39;&lt;/a&gt;&lt;/p&gt;</span></div>
<div class="line"><span class="stringliteral">              &lt;p&gt;&#39;</span> . <a class="code" href="full__lightweight__example_8php.html#a46ad7c5fff64ab9b49b9cfcaff650baa">$reply</a>-&gt;get_abstract() . <span class="stringliteral">&#39;&lt;/p&gt;</span></div>
<div class="line"><span class="stringliteral">              &lt;p&gt;Some client data:</span></div>
<div class="line"><span class="stringliteral">                &lt;ul&gt;</span></div>
<div class="line"><span class="stringliteral">                  &lt;li&gt;Name: &#39;</span> . <a class="code" href="full__lightweight__example_8php.html#a46ad7c5fff64ab9b49b9cfcaff650baa">$reply</a>-&gt;get_clientdata()-&gt;get_value(<span class="stringliteral">&#39;/ns:product/ns:name&#39;</span>, $nsmap) . <span class="stringliteral">&#39;&lt;/li&gt;</span></div>
<div class="line"><span class="stringliteral">                  &lt;li&gt;Availability: &#39;</span> . <a class="code" href="full__lightweight__example_8php.html#a46ad7c5fff64ab9b49b9cfcaff650baa">$reply</a>-&gt;get_clientdata()-&gt;get_value(<span class="stringliteral">&#39;/ns:product/ns:is_available&#39;</span>, $nsmap) . <span class="stringliteral">&#39;&lt;/li&gt;</span></div>
<div class="line"><span class="stringliteral">                  &lt;li&gt;Prices:</span></div>
<div class="line"><span class="stringliteral">                    &lt;ul&gt;&#39;</span>;</div>
<div class="line"><span class="comment">// Here multiple values are retrieved from client data</span></div>
<div class="line"><span class="keywordflow">foreach</span> (<a class="code" href="full__lightweight__example_8php.html#a46ad7c5fff64ab9b49b9cfcaff650baa">$reply</a>-&gt;get_clientdata()-&gt;get_values(<span class="stringliteral">&#39;/ns:product/ns:prices/ns:price&#39;</span>, $nsmap) as $value)</div>
<div class="line">    echo <span class="stringliteral">&#39;&lt;li&gt;&#39;</span> . $value . <span class="stringliteral">&#39;&lt;/li&gt;&#39;</span>;</div>
<div class="line">echo <span class="stringliteral">&#39;</span></div>
<div class="line"><span class="stringliteral">                    &lt;/ul&gt;</span></div>
<div class="line"><span class="stringliteral">                  &lt;/li&gt;</span></div>
<div class="line"><span class="stringliteral">                &lt;/ul&gt;</span></div>
<div class="line"><span class="stringliteral">              &lt;/p&gt;</span></div>
<div class="line"><span class="stringliteral">          &lt;/li&gt;&#39;</span>;</div>
<div class="line">        }</div>
<div class="line">    echo <span class="stringliteral">&#39;</span></div>
<div class="line"><span class="stringliteral">  &lt;/ul&gt;&#39;</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    echo <span class="stringliteral">&#39;</span></div>
<div class="line"><span class="stringliteral">  &lt;div class=&quot;row&quot;&gt;</span></div>
<div class="line"><span class="stringliteral">    &lt;div class=&quot;col-md-1&quot;&gt;&lt;/div&gt;</span></div>
<div class="line"><span class="stringliteral">    &lt;div class=&quot;col-md-5&quot;&gt;</span></div>
<div class="line"><span class="stringliteral">      &lt;h3&gt;&lt;span class=&quot;label label-success&quot;&gt;Other results&lt;/span&gt;&lt;/h3&gt;</span></div>
<div class="line"><span class="stringliteral">    &lt;/div&gt;</span></div>
<div class="line"><span class="stringliteral">  &lt;/div&gt;&#39;</span>;</div>
<div class="line">} ?&gt;</div>
<div class="line"></div>
<div class="line">    &lt;!-- ####################### Replies ########################### --&gt;</div>
<div class="line">&lt;?php</div>
<div class="line">echo <span class="stringliteral">&#39;</span></div>
<div class="line"><span class="stringliteral">  &lt;ul class=&quot;list-unstyled&quot;&gt;&#39;</span>;</div>
<div class="line"><span class="keywordflow">foreach</span> ($replyset-&gt;get_replies() as <a class="code" href="full__lightweight__example_8php.html#a46ad7c5fff64ab9b49b9cfcaff650baa">$reply</a>) {</div>
<div class="line">?&gt;</div>
<div class="line">          &lt;li&gt;</div>
<div class="line">              &lt;h3&gt;&lt;?php echo <a class="code" href="full__lightweight__example_8php.html#a46ad7c5fff64ab9b49b9cfcaff650baa">$reply</a>-&gt;get_title() ?&gt;&lt;/h3&gt;</div>
<div class="line">              &lt;p&gt;&lt;a href=<span class="stringliteral">&quot;&lt;?php echo $reply-&gt;get_uri() ?&gt;&quot;</span>&gt;&lt;?php echo <a class="code" href="full__lightweight__example_8php.html#a46ad7c5fff64ab9b49b9cfcaff650baa">$reply</a>-&gt;get_uri() ?&gt;&lt;/a&gt;&lt;/p&gt;</div>
<div class="line">              &lt;p&gt;&lt;?php echo <a class="code" href="full__lightweight__example_8php.html#a46ad7c5fff64ab9b49b9cfcaff650baa">$reply</a>-&gt;get_abstract() ?&gt;&lt;/p&gt;</div>
<div class="line">              &lt;p&gt;Some client data:</div>
<div class="line">                &lt;ul&gt;</div>
<div class="line">                  &lt;li&gt;Name: &lt;?php echo <a class="code" href="full__lightweight__example_8php.html#a46ad7c5fff64ab9b49b9cfcaff650baa">$reply</a>-&gt;get_clientdata()-&gt;get_value(<span class="stringliteral">&#39;/ns:product/ns:name&#39;</span>, $nsmap) ?&gt;&lt;/li&gt;</div>
<div class="line">                  &lt;li&gt;Availability: &lt;?php echo <a class="code" href="full__lightweight__example_8php.html#a46ad7c5fff64ab9b49b9cfcaff650baa">$reply</a>-&gt;get_clientdata()-&gt;get_value(<span class="stringliteral">&#39;/ns:product/ns:is_available&#39;</span>, $nsmap) ?&gt;&lt;/li&gt;</div>
<div class="line">                  &lt;li&gt;Prices:</div>
<div class="line">                    &lt;ul&gt;</div>
<div class="line">&lt;?php</div>
<div class="line"><span class="comment">// Here multiple values are retrieved from client data</span></div>
<div class="line"><span class="keywordflow">foreach</span> (<a class="code" href="full__lightweight__example_8php.html#a46ad7c5fff64ab9b49b9cfcaff650baa">$reply</a>-&gt;get_clientdata()-&gt;get_values(<span class="stringliteral">&#39;/ns:product/ns:prices/ns:price&#39;</span>, $nsmap) as $value) {</div>
<div class="line">    echo <span class="stringliteral">&#39;&lt;li&gt;&#39;</span> . $value . <span class="stringliteral">&#39;&lt;/li&gt;&#39;</span>;</div>
<div class="line">} ?&gt;</div>
<div class="line">                    &lt;/ul&gt;</div>
<div class="line">                  &lt;/li&gt;</div>
<div class="line">                &lt;/ul&gt;</div>
<div class="line">              &lt;/p&gt;</div>
<div class="line">          &lt;/li&gt;</div>
<div class="line">&lt;?php } ?&gt;</div>
<div class="line">  &lt;/ul&gt;</div>
<div class="line">&lt;/div&gt;</div>
<div class="line">    &lt;/div&gt;</div>
<div class="line"></div>
<div class="line">    &lt;!-- ####################### Pager ########################### --&gt;</div>
<div class="line">&lt;?php</div>
<div class="line"><span class="keywordflow">if</span> ($replyset-&gt;has_pager()) {</div>
<div class="line">    $pager = $replyset-&gt;get_pager();</div>
<div class="line">?&gt;</div>
<div class="line">    &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;row&quot;</span>&gt;</div>
<div class="line">      &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;row&quot;</span>&gt;</div>
<div class="line">        &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;col-md-5&quot;</span>&gt;&lt;/div&gt;</div>
<div class="line">        &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;input-group col-md-3&quot;</span>&gt;</div>
<div class="line">          &lt;ul <span class="keyword">class</span>=<span class="stringliteral">&quot;pagination&quot;</span>&gt;</div>
<div class="line">&lt;?php</div>
<div class="line"><span class="keywordflow">foreach</span> ($pager-&gt;get_all_pages() as $page =&gt; $url) {</div>
<div class="line">    <span class="keywordflow">if</span> ($page == $pager-&gt;get_current_no()) {</div>
<div class="line">        $active = <span class="stringliteral">&#39;active&#39;</span>;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        $active = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line">    }</div>
<div class="line">?&gt;</div>
<div class="line">            &lt;li <span class="keyword">class</span>=<span class="stringliteral">&quot;&lt;?php echo $active ?&gt;&quot;</span>&gt;&lt;a href=<span class="stringliteral">&quot;&lt;?php echo $url ?&gt;&quot;</span>&gt;&lt;?php echo $page ?&gt;&lt;/a&gt;&lt;/li&gt;</div>
<div class="line">&lt;?php } ?&gt;</div>
<div class="line"></div>
<div class="line">          &lt;/ul&gt;</div>
<div class="line">        &lt;/div&gt;</div>
<div class="line">      &lt;/div&gt;</div>
<div class="line">&lt;?php } ?&gt;</div>
<div class="line"></div>
<div class="line">    &lt;/div&gt;</div>
<div class="line"></div>
<div class="line">    &lt;!-- ####################### Spellcheck ########################### --&gt;</div>
<div class="line">&lt;?php } elseif (<a class="code" href="full__example_8php.html#ab03a8518b780b4b3b7f0d88cd1bb1186">$helper</a>-&gt;has_spellcheck()) { <span class="comment">// if no replyset, let&#39;s check spellcheck ?&gt;</span></div>
<div class="line">    &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;row&quot;</span>&gt;</div>
<div class="line">      &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;col-md-9&quot;</span>&gt;</div>
<div class="line">        &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;row&quot;</span>&gt;</div>
<div class="line">          &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;col-md-1&quot;</span>&gt;&lt;/div&gt;</div>
<div class="line">          &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;col-md-4&quot;</span>&gt;</div>
<div class="line">            &lt;h2&gt;Typo ?&lt;/h2&gt;</div>
<div class="line">          &lt;/div&gt;</div>
<div class="line">        &lt;/div&gt;</div>
<div class="line">&lt;?php</div>
<div class="line"><span class="keywordflow">foreach</span> (<a class="code" href="full__example_8php.html#ab03a8518b780b4b3b7f0d88cd1bb1186">$helper</a>-&gt;get_spellchecks() as $feed =&gt; $suggestions) {</div>
<div class="line">?&gt;</div>
<div class="line">        &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;row&quot;</span>&gt;</div>
<div class="line">          &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;col-md-6&quot;</span>&gt;</div>
<div class="line">            &lt;h4&gt;&lt;?php echo $feed ?&gt;&lt;/h4&gt;</div>
<div class="line">            &lt;ul <span class="keyword">class</span>=<span class="stringliteral">&quot;list-unstyled&quot;</span>&gt;</div>
<div class="line">&lt;?php</div>
<div class="line">    <span class="keywordflow">foreach</span> ($suggestions as $suggest) {</div>
<div class="line">?&gt;</div>
<div class="line">              &lt;li&gt;</div>
<div class="line">                &lt;h3&gt;Did you mean...&lt;/h3&gt;</div>
<div class="line">                &lt;p&gt;&lt;a href=<span class="stringliteral">&quot;&lt;?php echo $suggest-&gt;get_link() ?&gt;&quot;</span>&gt;&lt;?php echo $suggest-&gt;get_formatted_text() ?&gt;&lt;/a&gt;&lt;/p&gt;</div>
<div class="line">              &lt;/li&gt;</div>
<div class="line">&lt;?php } ?&gt;</div>
<div class="line">            &lt;/ul&gt;</div>
<div class="line">          &lt;/div&gt;</div>
<div class="line">        &lt;/div&gt;</div>
<div class="line">&lt;?php } ?&gt;</div>
<div class="line">      &lt;/div&gt;</div>
<div class="line">    &lt;/div&gt;</div>
<div class="line">    &lt;!-- ####################### Error ########################### --&gt;</div>
<div class="line">&lt;?php } elseif (<a class="code" href="full__example_8php.html#ab03a8518b780b4b3b7f0d88cd1bb1186">$helper</a>-&gt;in_error()) { <span class="comment">// no spellcheck... is there any error? ?&gt;</span></div>
<div class="line">    &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;row&quot;</span>&gt;</div>
<div class="line">      &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;col-md-9&quot;</span>&gt;</div>
<div class="line">        &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;row&quot;</span>&gt;</div>
<div class="line">          &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;col-md-1&quot;</span>&gt;&lt;/div&gt;</div>
<div class="line">          &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;col-md-4&quot;</span>&gt;</div>
<div class="line">            &lt;h2&gt;Really bad error occured&lt;/h2&gt;</div>
<div class="line">          &lt;/div&gt;</div>
<div class="line">        &lt;/div&gt;</div>
<div class="line">        &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;row&quot;</span>&gt;</div>
<div class="line">          &lt;div <span class="keyword">class</span>=<span class="stringliteral">&quot;col-md-10&quot;</span>&gt;</div>
<div class="line">            &lt;h2&gt;&lt;?php echo <a class="code" href="full__example_8php.html#ab03a8518b780b4b3b7f0d88cd1bb1186">$helper</a>-&gt;get_error_msg() ?&gt;&lt;/h2&gt;</div>
<div class="line">          &lt;/div&gt;</div>
<div class="line">        &lt;/div&gt;</div>
<div class="line">      &lt;/div&gt;</div>
<div class="line">    &lt;/div&gt;</div>
<div class="line">&lt;?php } ?&gt;</div>
<div class="line"></div>
<div class="line">    &lt;!-- jQuery (necessary <span class="keywordflow">for</span> Bootstrap\<span class="stringliteral">&#39;s JavaScript plugins) --&gt;</span></div>
<div class="line"><span class="stringliteral">    &lt;script src=&quot;//code.jquery.com/jquery.js&quot;&gt;&lt;/script&gt;</span></div>
<div class="line"><span class="stringliteral">    &lt;!-- Include all compiled plugins (below), or include individual files as needed --&gt;</span></div>
<div class="line"><span class="stringliteral">    &lt;script src=&quot;js/bootstrap.min.js&quot;&gt;&lt;/script&gt;</span></div>
<div class="line"><span class="stringliteral">  &lt;/body&gt;</span></div>
<div class="line"><span class="stringliteral">&lt;/html&gt;</span></div>
<div class="line"><span class="stringliteral"></span></div>
</div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Mar 24 2014 17:13:48 for Antidot PHP API by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
