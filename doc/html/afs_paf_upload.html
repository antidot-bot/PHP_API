<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>##Antidot PHP API: Antidot PaF upload</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>Antidot PaF upload </h1>  </div>
</div>
<div class="contents">
<h2><a class="anchor" id="apu_introduction"></a>
Introduction</h2>
<p>This API simplify upload of one or more documents to Antidot PaF.</p>
<p>Currently, there is no API which allow to launch specific PaF. So, documents should be uploaded to a PaF configured in auto start mode.</p>
<h2><a class="anchor" id="apu_document"></a>
Document and Document Manager</h2>
<p>A document is an instance of <em><a class="el" href="classAfsDocument.html" title="Represent a document.">AfsDocument</a></em>. Such document is built from string content or file available on the filesystem. It is the responsability of the user to set valid content to the document. If the document is initialized with a file from the filesystem, it should be still available until it has been sent correctly to the Web Service.</p>
<p>One or more documents can be added to an instance of <em><a class="el" href="classAfsDocumentManager.html" title="Document manager.">AfsDocumentManager</a></em>. Using document manager is the only mean to upload more than one document at a time.</p>
<p>Example for document manager and documents of various types: </p>
<div class="fragment"><pre class="fragment">   $mgr = <span class="keyword">new</span> <a class="code" href="classAfsDocumentManager.html" title="Document manager.">AfsDocumentManager</a>();

   $content = generate_xml_document(42);
   $mgr-&gt;add_document(<span class="keyword">new</span> <a class="code" href="classAfsDocument.html" title="Represent a document.">AfsDocument</a>($content));

   $doc = <span class="keyword">new</span> <a class="code" href="classAfsDocument.html" title="Represent a document.">AfsDocument</a>();
   $doc-&gt;set_content_from_file(<span class="stringliteral">&#39;/path/to/specific/path/file&#39;</span>);
   $mgr-&gt;add_document($doc); 
</pre></div><h2><a class="anchor" id="apu_paf_connector"></a>
PaF connector</h2>
<p>Instance of <em><a class="el" href="classAfsPafConnector.html" title="AFS PaF connector.">AfsPafConnector</a></em> allows to configure connection to specific PaF. Once it is configure, one or more documents can be uploaded by calling appropriate method (<em><a class="el" href="classAfsPafConnector.html#abe4f4b5475b59dea35bbf2c18dd1aea4" title="Upload one document to the PaF.">AfsPafConnector::upload_doc</a></em> or <em><a class="el" href="classAfsPafConnector.html#a594494ebe4936cb8ecd2755d685c75ab" title="Upload one or more documents through document manager.">AfsPafConnector::upload_docs</a></em>).</p>
<p>Example of uploading one or more documents: </p>
<div class="fragment"><pre class="fragment">   $auth = <span class="keyword">new</span> <a class="code" href="classAfsAuthentication.html" title="AFS authentication.">AfsAuthentication</a>(<span class="stringliteral">&#39;antidot&#39;</span>, <span class="stringliteral">&#39;change_on_install&#39;</span>, AFS_AUTH_ANTIDOT);
   $service = <span class="keyword">new</span> <a class="code" href="classAfsService.html" title="Antidot service.">AfsService</a>(42);
   $connector = <span class="keyword">new</span> <a class="code" href="classAfsPafConnector.html" title="AFS PaF connector.">AfsPafConnector</a>(<span class="stringliteral">&#39;eval.partners.antidot.net&#39;</span>, $service, <span class="stringliteral">&#39;TEST&#39;</span>, $auth);

   <span class="comment">// Upload one document directly</span>
   $result = $connector-&gt;upload_doc($doc);

   <span class="comment">// OR upload one or more documents using document manager</span>
   $result = $connector-&gt;upload_docs($mgr);
</pre></div><h2><a class="anchor" id="apu_paf_reply"></a>
PaF upload result</h2>
<p>Instance of <em><a class="el" href="classAfsPafUploadReply.html" title="Wrapper for reply of PaF upload document.">AfsPafUploadReply</a></em> simplifies reply management of PaF upload. If an error occured, you can get it in a very simple way: </p>
<div class="fragment"><pre class="fragment">   $reply = $connector-&gt;upload_doc($doc);

   <span class="keywordflow">if</span> ($reply-&gt;in_error())
   {
     echo <span class="stringliteral">&#39;ERROR: &#39;</span> . $reply-&gt;error;
   }
   <span class="keywordflow">else</span>
   {
     echo <span class="stringliteral">&#39;OK (Job id: &#39;</span> . $reply-&gt;result-&gt;jobId . <span class="charliteral">&#39;)&#39;</span>;
   }
</pre></div> </div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Fri Dec 13 2013 09:03:11 for ##Antidot PHP API by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
