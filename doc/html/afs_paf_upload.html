<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Antidot PHP API: Antidot PaF upload</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-antidot-long-200x41.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Antidot PHP API
   &#160;<span id="projectnumber">version 0.12.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Antidot PaF upload </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#apu_introduction">Introduction</a></li>
<li class="level1"><a href="#apu_document">Document and Document Manager</a></li>
<li class="level1"><a href="#apu_paf_connector">PaF connector</a></li>
<li class="level1"><a href="#apu_paf_reply">PaF upload result</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="apu_introduction"></a>
Introduction</h1>
<p>This API simplify upload of one or more documents to Antidot PaF.</p>
<p>Currently, there is no API which allow to launch specific PaF. So, documents should be uploaded to a PaF configured in auto start mode.</p>
<h1><a class="anchor" id="apu_document"></a>
Document and Document Manager</h1>
<p>A document is an instance of <em><a class="el" href="classAfsDocument.html" title="Represent a document. ">AfsDocument</a></em>. Such document is built from string content or file available on the filesystem. It is the responsability of the user to set valid content to the document. If the document is initialized with a file from the filesystem, it should be still available until it has been sent correctly to the Web Service.</p>
<p>One or more documents can be added to an instance of <em><a class="el" href="classAfsDocumentManager.html" title="Document manager. ">AfsDocumentManager</a></em>. Using document manager is the only mean to upload more than one document at a time.</p>
<p>Example for document manager and documents of various types: </p>
<div class="fragment"><div class="line">$mgr = <span class="keyword">new</span> <a class="code" href="classAfsDocumentManager.html">AfsDocumentManager</a>();</div>
<div class="line"></div>
<div class="line">$content = generate_xml_document(42);</div>
<div class="line">$mgr-&gt;add_document(<span class="keyword">new</span> <a class="code" href="classAfsDocument.html">AfsDocument</a>($content));</div>
<div class="line"></div>
<div class="line">$doc = <span class="keyword">new</span> <a class="code" href="classAfsDocument.html">AfsDocument</a>();</div>
<div class="line">$doc-&gt;set_content_from_file(<span class="stringliteral">&#39;/path/to/specific/path/file&#39;</span>);</div>
<div class="line">$mgr-&gt;add_document($doc); </div>
</div><!-- fragment --><h1><a class="anchor" id="apu_paf_connector"></a>
PaF connector</h1>
<p>Instance of <em><a class="el" href="classAfsPafConnector.html" title="AFS PaF connector. ">AfsPafConnector</a></em> allows to configure connection to specific PaF. Once it is configure, one or more documents can be uploaded by calling appropriate method (<em><a class="el" href="classAfsPafConnector.html#abe4f4b5475b59dea35bbf2c18dd1aea4" title="Upload one document to the PaF. ">AfsPafConnector::upload_doc</a></em> or <em><a class="el" href="classAfsPafConnector.html#a594494ebe4936cb8ecd2755d685c75ab" title="Upload one or more documents through document manager. ">AfsPafConnector::upload_docs</a></em>).</p>
<p>Example of uploading one or more documents: </p>
<div class="fragment"><div class="line">$auth = <span class="keyword">new</span> <a class="code" href="interfaceAfsAuthentication.html">AfsAuthentication</a>(<span class="stringliteral">&#39;antidot&#39;</span>, <span class="stringliteral">&#39;change_on_install&#39;</span>, AFS_AUTH_ANTIDOT);</div>
<div class="line"><a class="code" href="full__example_8php.html#abb8d1943d2cf9b6a3d54a4fed1ad2d9d">$service</a> = <span class="keyword">new</span> <a class="code" href="classAfsService.html">AfsService</a>(42);</div>
<div class="line">$connector = <span class="keyword">new</span> <a class="code" href="classAfsPafConnector.html">AfsPafConnector</a>(<span class="stringliteral">&#39;eval.partners.antidot.net&#39;</span>, <a class="code" href="full__example_8php.html#abb8d1943d2cf9b6a3d54a4fed1ad2d9d">$service</a>, <span class="stringliteral">&#39;TEST&#39;</span>, $auth);</div>
<div class="line"></div>
<div class="line"><span class="comment">// Upload one document directly</span></div>
<div class="line">$result = $connector-&gt;upload_doc($doc);</div>
<div class="line"></div>
<div class="line"><span class="comment">// OR upload one or more documents using document manager</span></div>
<div class="line">$result = $connector-&gt;upload_docs($mgr);</div>
</div><!-- fragment --><h1><a class="anchor" id="apu_paf_reply"></a>
PaF upload result</h1>
<p>Instance of <em><a class="el" href="classAfsPafUploadReply.html" title="Wrapper for reply of PaF upload document. ">AfsPafUploadReply</a></em> simplifies reply management of PaF upload. If an error occured, you can get it in a very simple way: </p>
<div class="fragment"><div class="line"><a class="code" href="full__lightweight__example_8php.html#a46ad7c5fff64ab9b49b9cfcaff650baa">$reply</a> = $connector-&gt;upload_doc($doc);</div>
<div class="line"></div>
<div class="line"><span class="keywordflow">if</span> (<a class="code" href="full__lightweight__example_8php.html#a46ad7c5fff64ab9b49b9cfcaff650baa">$reply</a>-&gt;in_error())</div>
<div class="line">{</div>
<div class="line">  echo <span class="stringliteral">&#39;ERROR: &#39;</span> . <a class="code" href="full__lightweight__example_8php.html#a46ad7c5fff64ab9b49b9cfcaff650baa">$reply</a>-&gt;error;</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">else</span></div>
<div class="line">{</div>
<div class="line">  echo <span class="stringliteral">&#39;OK (Job id: &#39;</span> . <a class="code" href="full__lightweight__example_8php.html#a46ad7c5fff64ab9b49b9cfcaff650baa">$reply</a>-&gt;result-&gt;jobId . <span class="charliteral">&#39;)&#39;</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Apr 4 2014 16:07:05 for Antidot PHP API by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
